(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55584962"],{"0681":function(e,t,n){"use strict";var a=n("f215"),o=n.n(a);o.a},"070f":function(e,t,n){},"0ccb":function(e,t,n){var a=n("50c4"),o=n("1148"),i=n("1d80"),r=Math.ceil,s=function(e){return function(t,n,s){var c,u,l=String(i(t)),d=l.length,p=void 0===s?" ":String(s),f=a(n);return f<=d||""==p?l:(c=f-d,u=o.call(p,r(c/p.length)),u.length>c&&(u=u.slice(0,c)),e?l+u:u+l)}};e.exports={start:s(!1),end:s(!0)}},1148:function(e,t,n){"use strict";var a=n("a691"),o=n("1d80");e.exports="".repeat||function(e){var t=String(o(this)),n="",i=a(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},"13d5":function(e,t,n){"use strict";var a=n("23e7"),o=n("d58f").left,i=n("a640"),r=n("ae40"),s=i("reduce"),c=r("reduce",{1:0});a({target:"Array",proto:!0,forced:!s||!c},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"17c3":function(e,t,n){"use strict";var a=n("2f83"),o=n.n(a);o.a},"1b9f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("page-layout",{attrs:{avatar:e.currUser.avatar}},[n("div",{attrs:{slot:"headerContent"},slot:"headerContent"},[n("div",{staticClass:"title"},[e._v(e._s(e.welcome.timeFix[e.lang])+"，"+e._s(e.currUser.name))])]),n("Notice"),n("template",{slot:"extra"},["user"==e.roles[0].id?n("head-info",{staticClass:"split-right",attrs:{title:e.$t("nad"),content:e.nucleicAcidResult}}):e._e(),"user"==e.roles[0].id?n("head-info",{staticClass:"split-right",attrs:{title:e.$t("vaccine"),content:e.vaccineStage}}):e._e(),"user"==e.roles[0].id?n("head-info",{staticClass:"split-right",attrs:{title:e.$t("status"),content:e.DangerLevel}}):e._e()],1),[n("a-row",{staticStyle:{margin:"0 -12px"}},[n("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:"24",md:24,sm:24,xs:24}},[n("div",{staticStyle:{width:"90%",height:"400px"},attrs:{id:"district"}})]),n("a-col",{staticStyle:{padding:"0 12px"},attrs:{xl:24,lg:24,md:24,sm:24,xs:24}},[n("a-card",{attrs:{title:"当前位置"}},[null!==e.position?n("p",[e._v(" 您所在的城市: "+e._s(e.position.city)+" ")]):e._e(),n("div",{attrs:{id:"mapcontainer"}})]),n("a-card",{attrs:{title:"公告信息"}},[n("a-list",{attrs:{size:"small",pagination:{showSizeChanger:!0,showQuickJumper:!0,pageSize:5,total:e.Notice.length}}},[e._l(e.Notice,(function(t){return n("a-list-item",{key:t.notice_id,on:{click:function(n){return e.showNoticeInfo(t)}}},[e._v(" "+e._s(t.notice_name)+" ")])})),n("a-drawer",{style:{position:"absolute"},attrs:{title:e.NoticeName,placement:"right",closable:!1,visible:e.open,"get-container":!1},on:{close:e.onCloseNotice}},[n("p",[e._v(e._s(e.NoticeContent))])])],2)],1)],1)],1)]],2)},o=[],i=(n("99af"),n("7db0"),n("d81d"),n("13d5"),n("fb6a"),n("d3b7"),n("ac1f"),n("25f0"),n("4d90"),n("1276"),n("96cf"),n("1da1")),r=n("5530"),s=n("45eb"),c=n("779e"),u=n("5880"),l=n("b775"),d=n("313e"),p=n("862d"),f=n.n(p),g=n("ec7e"),h=n.n(g),v=n("8bbf"),m=n.n(v),A=n("be65"),w=n.n(A),b=n("7424"),M=n("cebe"),y=n.n(M);m.a.use(h.a);var I={name:"Homepage",components:{HeadInfo:c["a"],PageLayout:s["a"]},i18n:n("9c55"),data:function(){return{projects:[],loading:!0,activities:[],teams:[],welcome:{timeFix:"",message:""},Notice:[],longitude:null,latitude:null,address:null,Cookie:null,ErrorPosition:{status:!1,message:null},DangerLevel:"低风险人群",vaccineStage:"第二阶段",nucleicAcidResult:"阴性",cityInfo:"xx市",open:!1,NoticeContent:"没有信息",NoticeName:"没有公告",Authorization:null,position:null,infector:null,showPos:null,showNum:null,uesr:null,roles:null,Date:"2022-12-21"}},computed:Object(r["a"])(Object(r["a"])({},Object(u["mapState"])("account",{currUser:"user"})),Object(u["mapState"])("setting",["lang"])),created:function(){var e=this;this.getAuthorization(),Object(l["g"])("/user/welcome",l["a"].GET).then((function(t){return e.welcome=t.data})),Object(l["g"])("/work/activity",l["a"].GET).then((function(t){return e.activities=t.data})),Object(l["g"])("/work/team",l["a"].GET).then((function(t){return e.teams=t.data})),Object(l["g"])("/project",l["a"].GET).then((function(t){e.projects=t.data,e.loading=!1})),this.getNotice(),this.initMap(),this.userConfig()},mounted:function(){this.getInfectorNumber()},methods:Object(r["a"])(Object(r["a"])({},Object(u["mapMutations"])("account",["getUser","getRoles"])),{},{userConfig:function(){var e=localStorage.getItem("admin.user");this.user=JSON.parse(e);var t=localStorage.getItem("admin.roles");this.roles=JSON.parse(t),"user"==this.roles[0].id&&this.getUserHealthInfo()},disChart:function(){var e,t=document.getElementById("district"),n=d["init"](t);e={title:{text:"各地区感染人数"},xAxis:{type:"category",data:this.showPos.slice(0,10),axisLabel:{textStyle:{fontSize:6}}},yAxis:{type:"value"},series:[{data:this.showNum.slice(0,10),type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}]},e&&n.setOption(e)},timeChart:function(){var e,t=document.getElementById("time"),n=d["init"](t);e={title:{text:"7日内上海感染人数变化"},xAxis:{type:"category",data:["7.12","7.13","7.14","7.15","7.16","7.17","7.18"]},yAxis:{type:"value"},series:[{data:[150,230,224,218,135,147,260],type:"line"}]},e&&n.setOption(e)},getNotice:function(){var e=this;y.a.get(b["ADDRESS"]+"/Notice/GetNotice",{header:{Authorization:this.Authorization}}).then((function(t){e.Notice=t.data.MessageDetail})).catch((function(e){}))},showNoticeInfo:function(e){this.NoticeContent=e.content,this.NoticeName=e.notice_name,this.open=!0},onCloseNotice:function(){this.open=!1},getAuthorization:function(){this.Authorization=w.a.get(l["xsrfHeaderName"]).Authorization.split(" ")[1]},initMap:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.a.load({key:"fb07259e64330041891de0e42b9f0ffd",version:"1.4.15",plugins:[]});case 3:return n=t.sent,e.map=new n.Map("mapcontainer",{resizeEnable:!0,zoom:13}),t.next=7,e.getCurrentPosition(n);case 7:if(a=t.sent,!a){t.next=12;break}return a.longitude,a.latitude,t.next=12,e.getReverseGeocode();case 12:t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](0);case 16:case"end":return t.stop()}}),t,null,[[0,14]])})))()},getCurrentPosition:function(e){var t=this;return new Promise((function(n,a){e.plugin("AMap.Geolocation",(function(){var o=new e.Geolocation({enableHighAccuracy:!0,timeout:1e4,butttonOffset:new e.Pixel(1,2),zoomToAccuracy:!0,buttonPostion:"RB"});t.map.addControl(o),o.getCurrentPosition((function(e,o){"complete"===e?(t.ErrorPosition.status=!1,t.longitude=o.position.lng,t.latitude=o.position.lat,n(o.position)):(t.ErrorPosition.status=!0,t.ErrorPosition.message=o.message,a(o.message))}))}))}))},getReverseGeocode:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="33eaa61b207861b0fe36300c6bf98dfe",a="".concat(e.longitude,",").concat(e.latitude),o="https://restapi.amap.com/v3/geocode/regeo",t.prev=3,t.next=6,m.a.jsonp(o,{key:n,location:a,poitype:"",radius:"",extensions:"all",roadlevel:""});case 6:i=t.sent,"1"===i.status&&i.regeocode&&(e.address=i.regeocode.addressComponent,e.position.province=e.address.province,e.position.city=e.address.city,e.position.district=e.address.district,e.position.township=e.address.township,e.position.pos_id=e.address.adcode),t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](3);case 12:case"end":return t.stop()}}),t,null,[[3,10]])})))()},getTime:function(){var e=new Date,t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(a)},getInfectorNumber:function(){var e=this;y.a.get(b["ADDRESS"]+"/GetInfectNumber/GetProvinceInfector",{headers:{Authorization:this.Authorization},params:{time:this.Date}}).then((function(t){var n=t.data.City.reduce((function(e,t){var n=e.find((function(e){return e.pos_name===t.pos_name}));return n?n.number+=t.number:e.push(t),e}),[]);e.infector=n,e.infector.sort((function(e,t){return t.number-e.number})),e.showNum=e.infector.map((function(e){return e.number})),e.showPos=e.infector.map((function(e){return e.pos_name})),e.disChart()})).catch((function(e){}))},getUserHealthInfo:function(){var e=this;y.a.get(b["ADDRESS"]+"/UserHealth/GetUserHealthInfo",{headers:{Authorization:this.Authorization}}).then((function(t){e.DangerLevel=t.data.current_status,e.nucleicAcidResult=t.data.nucieic_acid_test_result,e.vaccineStage="已接种"+t.data.vaccination_status.toString()+"次"}))}})},x=I,k=(n("1ea7"),n("17c3"),n("0c7c")),U=Object(k["a"])(x,a,o,!1,null,null,null);t["default"]=U.exports},"1ea7":function(e,t,n){"use strict";var a=n("070f"),o=n.n(a);o.a},"2f83":function(e,t,n){},"4d90":function(e,t,n){"use strict";var a=n("23e7"),o=n("0ccb").start,i=n("9a0c");a({target:"String",proto:!0,forced:i},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"779e":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"head-info"},[n("span",[e._v(e._s(e.title))]),n("p",[e._v(e._s(e.content))])])},o=[],i={name:"HeadInfo",props:["title","content","bordered"]},r=i,s=(n("0681"),n("0c7c")),c=Object(s["a"])(r,a,o,!1,null,"2f5611ad",null);t["a"]=c.exports},"862d":function(e,t,n){"use strict";(function(t,n){e.exports=n()})(0,(function(){function e(e){var a=[];return e.AMapUI&&a.push(t(e.AMapUI)),e.Loca&&a.push(n(e.Loca)),Promise.all(a)}function t(e){return new Promise((function(t,n){var s=[];if(e.plugins)for(var c=0;c<e.plugins.length;c+=1)-1==o.AMapUI.plugins.indexOf(e.plugins[c])&&s.push(e.plugins[c]);if(i.AMapUI===a.failed)n("前次请求 AMapUI 失败");else if(i.AMapUI===a.notload){i.AMapUI=a.loading,o.AMapUI.version=e.version||o.AMapUI.version,c=o.AMapUI.version;var u=document.body||document.head,l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/ui/"+c+"/main.js",l.onerror=function(e){i.AMapUI=a.failed,n("请求 AMapUI 失败")},l.onload=function(){if(i.AMapUI=a.loaded,s.length)window.AMapUI.loadUI(s,(function(){for(var e=0,n=s.length;e<n;e++){var a=s[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}for(t();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()}));else for(t();r.AMapUI.length;)r.AMapUI.splice(0,1)[0]()},u.appendChild(l)}else i.AMapUI===a.loaded?e.version&&e.version!==o.AMapUI.version?n("不允许多个版本 AMapUI 混用"):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,n=s.length;e<n;e++){var a=s[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}t()})):t():e.version&&e.version!==o.AMapUI.version?n("不允许多个版本 AMapUI 混用"):r.AMapUI.push((function(e){e?n(e):s.length?window.AMapUI.loadUI(s,(function(){for(var e=0,n=s.length;e<n;e++){var a=s[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}t()})):t()}))}))}function n(e){return new Promise((function(t,n){if(i.Loca===a.failed)n("前次请求 Loca 失败");else if(i.Loca===a.notload){i.Loca=a.loading,o.Loca.version=e.version||o.Loca.version;var s=o.Loca.version,c=o.AMap.version.startsWith("2"),u=s.startsWith("2");if(c&&!u||!c&&u)n("JSAPI 与 Loca 版本不对应！！");else{c=o.key,u=document.body||document.head;var l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/loca?v="+s+"&key="+c,l.onerror=function(e){i.Loca=a.failed,n("请求 AMapUI 失败")},l.onload=function(){for(i.Loca=a.loaded,t();r.Loca.length;)r.Loca.splice(0,1)[0]()},u.appendChild(l)}}else i.Loca===a.loaded?e.version&&e.version!==o.Loca.version?n("不允许多个版本 Loca 混用"):t():e.version&&e.version!==o.Loca.version?n("不允许多个版本 Loca 混用"):r.Loca.push((function(e){e?n(e):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(a||(a={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},r={AMap:[],AMapUI:[],Loca:[]},s=[],c=function(e){"function"==typeof e&&(i.AMap===a.loaded?e(window.AMap):s.push(e))};return{load:function(t){return new Promise((function(n,r){if(i.AMap==a.failed)r("");else if(i.AMap==a.notload){var u=t.key,l=t.version,d=t.plugins;u?(window.AMap&&"lbs.amap.com"!==location.host&&r("禁止多种API加载方式混用"),o.key=u,o.AMap.version=l||o.AMap.version,o.AMap.plugins=d||o.AMap.plugins,i.AMap=a.loading,l=document.body||document.head,window.___onAPILoaded=function(o){if(delete window.___onAPILoaded,o)i.AMap=a.failed,r(o);else for(i.AMap=a.loaded,e(t).then((function(){n(window.AMap)}))["catch"](r);s.length;)s.splice(0,1)[0]()},d=document.createElement("script"),d.type="text/javascript",d.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+u+"&plugin="+o.AMap.plugins.join(","),d.onerror=function(e){i.AMap=a.failed,r(e)},l.appendChild(d)):r("请填写key")}else if(i.AMap==a.loaded)if(t.key&&t.key!==o.key)r("多个不一致的 key");else if(t.version&&t.version!==o.AMap.version)r("不允许多个版本 JSAPI 混用");else{if(u=[],t.plugins)for(l=0;l<t.plugins.length;l+=1)-1==o.AMap.plugins.indexOf(t.plugins[l])&&u.push(t.plugins[l]);u.length?window.AMap.plugin(u,(function(){e(t).then((function(){n(window.AMap)}))["catch"](r)})):e(t).then((function(){n(window.AMap)}))["catch"](r)}else if(t.key&&t.key!==o.key)r("多个不一致的 key");else if(t.version&&t.version!==o.AMap.version)r("不允许多个版本 JSAPI 混用");else{var p=[];if(t.plugins)for(l=0;l<t.plugins.length;l+=1)-1==o.AMap.plugins.indexOf(t.plugins[l])&&p.push(t.plugins[l]);c((function(){p.length?window.AMap.plugin(p,(function(){e(t).then((function(){n(window.AMap)}))["catch"](r)})):e(t).then((function(){n(window.AMap)}))["catch"](r)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},r={AMap:[],AMapUI:[],Loca:[]}}}}))},"9a0c":function(e,t,n){var a=n("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a)},"9c55":function(e,t){e.exports={messages:{CN:{project:"项目数",ranking:"团队排名",visit:"项目访问",progress:"进行中的项目",all:"全部项目",access:"快速开始/便捷导航",dynamic:"动态",degree:"指数",team:"团队",add:"添加",nad:"核酸",vaccine:"疫苗",status:"状态"},HK:{project:"項目數",ranking:"團隊排名",visit:"項目訪問",progress:"進行中的項目",all:"全部項目",access:"快速開始/便捷導航",dynamic:"動態",degree:"指數",team:"團隊",add:"添加",nad:"核酸",vaccine:"疫苗",status:"状态"},US:{project:"Project",ranking:"Ranking",visit:"Visit",progress:"Projects in progress",all:"All projects",access:"Quick start / Easy navigation",dynamic:"Dynamic",degree:"degree",team:"Team",add:"Add",nad:"nuclieic acid detection",vaccine:"vaccine",status:"status"}}}},d58f:function(e,t,n){var a=n("1c0b"),o=n("7b0b"),i=n("44ad"),r=n("50c4"),s=function(e){return function(t,n,s,c){a(n);var u=o(t),l=i(u),d=r(u.length),p=e?d-1:0,f=e?-1:1;if(s<2)while(1){if(p in l){c=l[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in l&&(c=n(c,l[p],p,u));return c}};e.exports={left:s(!1),right:s(!0)}},ec7e:function(e,t,n){var a,o,i;(function(n,r){o=[],a=r,i="function"===typeof a?a.apply(t,o):a,void 0===i||(e.exports=i)})(0,(function(){
/**
 * Vue Jsonp By LancerComet at 16:35, 2016.10.17.
 * # Carry Your World #
 *
 * @author: LancerComet
 * @license: MIT
 */
var e=null,t={install:function(t,a){t.jsonp=n,t.prototype.$jsonp=n,"number"===typeof a&&(e=a)}};function n(t,n,r){return n=n||{},r=r||e,new Promise((function(e,s){if("string"!==typeof t)throw new Error('[Vue.jsonp] Type of param "url" is not string.');var c=n.callbackQuery||"callback",u=n.callbackName||"jsonp_"+a();n[c]=u,delete n.callbackQuery,delete n.callbackName;var l=[];Object.keys(n).forEach((function(e){l=l.concat(o(e,n[e]))}));var d=i(l).join("&"),p=null;"number"===typeof r&&(p=setTimeout((function(){v(),f.removeChild(g),delete window[u],s({statusText:"Request Timeout",status:408})}),r)),window[u]=function(t){clearTimeout(p),v(),f.removeChild(g),e(t),delete window[u]};var f=document.querySelector("head"),g=document.createElement("script");function h(e){v(),clearTimeout(p),s({status:400,statusText:"Bad Request"})}function v(){g.removeEventListener("error",h)}g.addEventListener("error",h),g.src=t+(/\?/.test(t)?"&":"?")+d,f.appendChild(g)}))}function a(){return(Math.floor(1e5*Math.random())*Date.now()).toString(16)}function o(e,t){e=e.replace(/=/g,"");var n=[];switch(t.constructor){case String:case Number:case Boolean:n.push(encodeURIComponent(e)+"="+encodeURIComponent(t));break;case Array:t.forEach((function(t){n=n.concat(o(e+"[]=",t))}));break;case Object:Object.keys(t).forEach((function(a){var i=t[a];n=n.concat(o(e+"["+a+"]",i))}));break}return n}function i(e){var t=[];return e.forEach((function(e){"string"===typeof e?t.push(e):t=t.concat(i(e))})),t}return t}))},f215:function(e,t,n){}}]);