(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6647317e"],{"13d5":function(e,t,a){"use strict";var n=a("23e7"),_=a("d58f").left,r=a("a640"),o=a("ae40"),i=r("reduce"),s=o("reduce",{1:0});n({target:"Array",proto:!0,forced:!i||!s},{reduce:function(e){return _(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},3521:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"standard-table"},[a("div",{staticClass:"alert"},[e.selectedRows?a("a-alert",{attrs:{type:"info","show-icon":!0}},[a("div",{staticClass:"message",attrs:{slot:"message"},slot:"message"},[e._v(" 已选择 "),a("a",[e._v(e._s(e.selectedRows.length))]),e._v(" 项 "),a("a",{staticClass:"clear",on:{click:e.onClear}},[e._v("清空")]),e._l(e.needTotalList,(function(t,n){return[t.needTotal?a("div",{key:n}):e._e()]}))],2)]):e._e()],1),a("a-table",{attrs:{bordered:e.bordered,loading:e.loading,columns:e.columns,dataSource:e.dataSource,rowKey:e.rowKey,pagination:e.pagination,expandedRowKeys:e.expandedRowKeys,expandedRowRender:e.expandedRowRender,rowSelection:e.selectedRows?{selectedRowKeys:e.selectedRowKeys,onSelect:e.onSelect,onSelectAll:e.onSelectAll}:void 0},on:{change:e.onChange},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(a,n,_){return[e._t(t,null,null,{text:a,record:n,index:_})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,a,n,_){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:a,indent:n,expanded:_})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return a("template",{slot:t},[e._t(t)],2)}))],2)],1)},_=[],r=a("3ce2"),o=r["a"],i=(a("fe5f"),a("0c7c")),s=Object(i["a"])(o,n,_,!1,null,"4284fac8",null);t["a"]=s.exports},"3ce2":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("13d5"),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("07ac"),core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6__),D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5530"),D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2909");__webpack_exports__["a"]={name:"StandardTable",props:{bordered:Boolean,loading:[Boolean,Object],columns:Array,dataSource:Array,rowKey:{type:[String,Function],default:"key"},pagination:{type:[Object,Boolean],default:!0},selectedRows:Array,expandedRowKeys:Array,expandedRowRender:Function},data:function(){return{needTotalList:[]}},methods:{equals:function(e,t){if(e===t)return!0;var a=this.rowKey;return a&&"string"===typeof a?e[a]===t[a]:!(!a||"function"!==typeof a)&&a(e)===a(t)},contains:function(e,t){if(!e||0===e.length)return!1;for(var a=this.equals,n=0;n<e.length;n++)if(a(e[n],t))return!0;return!1},onSelectAll:function(e,t){var a=this,n=this.getKey,_=this.contains,r=this.dataSource.filter((function(e){return!_(t,e,a.rowKey)})),o=this.selectedRows.filter((function(e){return!_(r,e,a.rowKey)})),i={};o.forEach((function(e){return i[n(e)]=e})),t.forEach((function(e){return i[n(e)]=e}));var s=Object.values(i);this.$emit("update:selectedRows",s),this.$emit("selectedRowChange",s.map((function(e){return n(e)})),s)},getKey:function(e){var t=this.rowKey;if(t&&e)return"string"===typeof t?e[t]:t(e)},onSelect:function(e,t){var a=this.equals,n=this.selectedRows,_=this.getKey,r=t?[].concat(Object(D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__["a"])(n),[e]):n.filter((function(t){return!a(t,e)}));this.$emit("update:selectedRows",r),this.$emit("selectedRowChange",r.map((function(e){return _(e)})),r)},initTotalList:function(e){return e.filter((function(e){return e.needTotal})).map((function(e){return Object(D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])({},e),{},{total:0})}))},onClear:function(){this.$emit("update:selectedRows",[]),this.$emit("selectedRowChange",[],[]),this.$emit("clear")},onChange:function(e,t,a,n){var _=n.currentDataSource;this.$emit("change",e,t,a,{currentDataSource:_})}},created:function(){this.needTotalList=this.initTotalList(this.columns)},watch:{selectedRows:function selectedRows(_selectedRows2){this.needTotalList=this.needTotalList.map((function(item){return Object(D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])({},item),{},{total:_selectedRows2.reduce((function(sum,val){var v;try{v=val[item.dataIndex]?val[item.dataIndex]:eval("val.".concat(item.dataIndex))}catch(_){v=val[item.dataIndex]}return v=isNaN(parseFloat(v))?0:parseFloat(v),sum+v}),0)})}))}},computed:{selectedRowKeys:function(){var e=this;return this.selectedRows.map((function(t){return e.getKey(t)}))}}}},"60d9":function(e,t,a){},d58f:function(e,t,a){var n=a("1c0b"),_=a("7b0b"),r=a("44ad"),o=a("50c4"),i=function(e){return function(t,a,i,s){n(a);var c=_(t),l=r(c),d=o(c.length),u=e?d-1:0,h=e?-1:1;if(i<2)while(1){if(u in l){s=l[u],u+=h;break}if(u+=h,e?u<0:d<=u)throw TypeError("Reduce of empty array with no initial value")}for(;e?u>=0:d>u;u+=h)u in l&&(s=a(s,l[u],u,c));return s}};e.exports={left:i(!1),right:i(!0)}},fc67:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",[a("div",{class:e.advanced?"search":null},[a("a-form",{attrs:{layout:"horizontal"}},[a("div",{class:e.advanced?null:"fold"},[a("a-row",[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"省",labelCol:{span:2},wrapperCol:{span:18,offset:1}}},[a("a-select",{attrs:{placeholder:"请选择"},on:{change:e.handleProvinceChange},model:{value:e.selectedProvince,callback:function(t){e.selectedProvince=t},expression:"selectedProvince"}},e._l(e.provinces,(function(t){return a("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"市",labelCol:{span:2},wrapperCol:{span:18,offset:1}}},[a("a-select",{attrs:{placeholder:"请选择"},on:{change:e.handleCityChange},model:{value:e.selectedCity,callback:function(t){e.selectedCity=t},expression:"selectedCity"}},e._l(e.cities,(function(t){return a("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"区",labelCol:{span:2},wrapperCol:{span:18,offset:1}}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedDistrict,callback:function(t){e.selectedDistrict=t},expression:"selectedDistrict"}},e._l(e.districts,(function(t){return a("a-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1)])],1),a("div"),a("div",{class:e.advanced?"search":null},[a("a-form",{attrs:{layout:"horizontal"}},[a("span",{staticStyle:{float:"right","margin-top":"-20px",position:"left:-1000px"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.handleQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"10px","margin-right":"50px"},on:{click:e.handleReset}},[e._v("重置")])],1)])],1),a("div",[a("standard-table",{attrs:{columns:e.columns,dataSource:e.dataSource,pagination:Object.assign({},e.pagination,{onChange:e.onPageChange})},on:{change:e.onChange},scopedSlots:e._u([{key:"description",fn:function(t){var n=t.text;return a("div",{},[e._v(" "+e._s(n)+" ")])}},{key:"action",fn:function(t){t.text;var n=t.record;return a("div",{},[a("router-link",{attrs:{to:{name:"详情",params:{province:n.province,city:n.city,district:n.area}}}},[e._v("详情")])],1)}}])})],1)])],1)},_=[],r=(a("4de4"),a("d81d"),a("d3b7"),a("ac1f"),a("6062"),a("3ca3"),a("1276"),a("ddb0"),a("2909")),o=a("3521"),i=a("cebe"),s=a.n(i),c=a("7424"),l=a("be65"),d=a.n(l),u=a("b775"),h=a("313e"),f=[{title:"省份",dataIndex:"province"},{title:"市区",dataIndex:"city",scopedSlots:{customRender:"city"}},{title:"区域",dataIndex:"area",needTotal:!0,customRender:function(e){return e}},{title:"区域",dataIndex:"danger_Level",needTotal:!0,customRender:function(e){switch(e){case 0:return"无风险";case 1:return"低风险";case 2:return"中风险";case 3:return"高风险";default:return e}}},{scopedSlots:{customRender:"action"}}],p={name:"QueryList",components:{StandardTable:o["a"]},data:function(){return{selectedProvince:null,selectedCity:null,selectedDistrict:null,loading:!0,Date:(new Date).toISOString().split("T")[0],DistrictInfectorData:[],AllDangerData:[],provinces:[],cities:[],districts:[],cityData:{},districtData:{},advanced:!0,columns:f,dataSource:[],originalDataSource:[],selectedRows:[],pagination:{current:1,pageSize:10,total:0},Authorization:null}},created:function(){var e=this;setTimeout((function(){e.loading=!1,e.GetAllDangerData(),e.initLineChart()}),100),this.getAuthorization()},mounted:function(){},methods:{GetAllDangerData:function(){var e=this;s.a.get(c["ADDRESS"]+"/RiskLevel/SearchRiskLevel",{headers:{Authorization:this.Authorization}}).then((function(t){"success"===t.data.message&&(e.AllDangerData=t.data.DangerLevelInfo,e.dataSource=t.data.DangerLevelInfo,e.originalDataSource=t.data.DangerLevelInfo,e.ExtractProvinces())})).catch((function(e){}))},ExtractProvinces:function(){var e=Object(r["a"])(new Set(this.originalDataSource.map((function(e){return e.province}))));this.provinces=e},handleQuery:function(){var e=this;this.dataSource=this.originalDataSource;var t=this.dataSource.filter((function(t){var a=!e.selectedProvince||t.province===e.selectedProvince,n=!e.selectedCity||t.city===e.selectedCity,_=!e.selectedDistrict||t.area===e.selectedDistrict;return a&&n&&_}));this.dataSource=t},handleReset:function(){this.selectedProvince=null,this.selectedCity=null,this.selectedDistrict=null,this.dataSource=this.originalDataSource,this.cities=[],this.districts=[]},handleProvinceChange:function(){var e=this;this.selectedCity=null,this.selectedDistrict=null;var t=Object(r["a"])(new Set(this.originalDataSource.filter((function(t){return t.province===e.selectedProvince})).map((function(e){return e.city}))));this.cities=t},handleCityChange:function(){var e=this;this.selectedDistrict=null,this.districts=this.originalDataSource.filter((function(t){return t.province===e.selectedProvince&&t.city===e.selectedCity})).map((function(e){return e.area}))},updateLineChartTitle:function(e){this.lineChart&&this.lineChart.setOption({title:{text:"风险等级 - ".concat(e)}})},onPageChange:function(e,t){this.pagination.current=e,this.pagination.pageSize=t},toggleAdvanced:function(){this.advanced=!this.advanced},initLineChart:function(){this.lineChart=h.init(document.getElementById("lineChart")),this.drawLineChart()},getAuthorization:function(){this.Authorization=d.a.get(u["xsrfHeaderName"]).Authorization.split(" ")[1]}}},m=p,v=a("0c7c"),b=Object(v["a"])(m,n,_,!1,null,"6eb10700",null);t["default"]=b.exports},fe5f:function(e,t,a){"use strict";var n=a("60d9"),_=a.n(n);_.a}}]);