(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38b42219"],{"0ccb":function(e,t,a){var _=a("50c4"),n=a("1148"),r=a("1d80"),o=Math.ceil,s=function(e){return function(t,a,s){var i,c,l=String(r(t)),d=l.length,u=void 0===s?" ":String(s),f=_(a);return f<=d||""==u?l:(i=f-d,c=n.call(u,o(i/u.length)),c.length>i&&(c=c.slice(0,i)),e?l+c:c+l)}};e.exports={start:s(!1),end:s(!0)}},1148:function(e,t,a){"use strict";var _=a("a691"),n=a("1d80");e.exports="".repeat||function(e){var t=String(n(this)),a="",r=_(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(a+=t);return a}},"13d5":function(e,t,a){"use strict";var _=a("23e7"),n=a("d58f").left,r=a("a640"),o=a("ae40"),s=r("reduce"),i=o("reduce",{1:0});_({target:"Array",proto:!0,forced:!s||!i},{reduce:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},3521:function(e,t,a){"use strict";var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"standard-table"},[a("div",{staticClass:"alert"},[e.selectedRows?a("a-alert",{attrs:{type:"info","show-icon":!0}},[a("div",{staticClass:"message",attrs:{slot:"message"},slot:"message"},[e._v(" 已选择 "),a("a",[e._v(e._s(e.selectedRows.length))]),e._v(" 项 "),a("a",{staticClass:"clear",on:{click:e.onClear}},[e._v("清空")]),e._l(e.needTotalList,(function(t,_){return[t.needTotal?a("div",{key:_}):e._e()]}))],2)]):e._e()],1),a("a-table",{attrs:{bordered:e.bordered,loading:e.loading,columns:e.columns,dataSource:e.dataSource,rowKey:e.rowKey,pagination:e.pagination,expandedRowKeys:e.expandedRowKeys,expandedRowRender:e.expandedRowRender,rowSelection:e.selectedRows?{selectedRowKeys:e.selectedRowKeys,onSelect:e.onSelect,onSelectAll:e.onSelectAll}:void 0},on:{change:e.onChange},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(a,_,n){return[e._t(t,null,null,{text:a,record:_,index:n})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,a,_,n){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:a,indent:_,expanded:n})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return a("template",{slot:t},[e._t(t)],2)}))],2)],1)},n=[],r=a("3ce2"),o=r["a"],s=(a("fe5f"),a("0c7c")),i=Object(s["a"])(o,_,n,!1,null,"4284fac8",null);t["a"]=i.exports},"3ce2":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("13d5"),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("07ac"),core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6__),D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5530"),D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2909");__webpack_exports__["a"]={name:"StandardTable",props:{bordered:Boolean,loading:[Boolean,Object],columns:Array,dataSource:Array,rowKey:{type:[String,Function],default:"key"},pagination:{type:[Object,Boolean],default:!0},selectedRows:Array,expandedRowKeys:Array,expandedRowRender:Function},data:function(){return{needTotalList:[]}},methods:{equals:function(e,t){if(e===t)return!0;var a=this.rowKey;return a&&"string"===typeof a?e[a]===t[a]:!(!a||"function"!==typeof a)&&a(e)===a(t)},contains:function(e,t){if(!e||0===e.length)return!1;for(var a=this.equals,_=0;_<e.length;_++)if(a(e[_],t))return!0;return!1},onSelectAll:function(e,t){var a=this,_=this.getKey,n=this.contains,r=this.dataSource.filter((function(e){return!n(t,e,a.rowKey)})),o=this.selectedRows.filter((function(e){return!n(r,e,a.rowKey)})),s={};o.forEach((function(e){return s[_(e)]=e})),t.forEach((function(e){return s[_(e)]=e}));var i=Object.values(s);this.$emit("update:selectedRows",i),this.$emit("selectedRowChange",i.map((function(e){return _(e)})),i)},getKey:function(e){var t=this.rowKey;if(t&&e)return"string"===typeof t?e[t]:t(e)},onSelect:function(e,t){var a=this.equals,_=this.selectedRows,n=this.getKey,r=t?[].concat(Object(D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__["a"])(_),[e]):_.filter((function(t){return!a(t,e)}));this.$emit("update:selectedRows",r),this.$emit("selectedRowChange",r.map((function(e){return n(e)})),r)},initTotalList:function(e){return e.filter((function(e){return e.needTotal})).map((function(e){return Object(D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])({},e),{},{total:0})}))},onClear:function(){this.$emit("update:selectedRows",[]),this.$emit("selectedRowChange",[],[]),this.$emit("clear")},onChange:function(e,t,a,_){var n=_.currentDataSource;this.$emit("change",e,t,a,{currentDataSource:n})}},created:function(){this.needTotalList=this.initTotalList(this.columns)},watch:{selectedRows:function selectedRows(_selectedRows2){this.needTotalList=this.needTotalList.map((function(item){return Object(D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(D_program_database_vue_antd_admin_zhongzhuan_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])({},item),{},{total:_selectedRows2.reduce((function(sum,val){var v;try{v=val[item.dataIndex]?val[item.dataIndex]:eval("val.".concat(item.dataIndex))}catch(_){v=val[item.dataIndex]}return v=isNaN(parseFloat(v))?0:parseFloat(v),sum+v}),0)})}))}},computed:{selectedRowKeys:function(){var e=this;return this.selectedRows.map((function(t){return e.getKey(t)}))}}}},"43aa":function(e,t,a){"use strict";var _=a("c2e5"),n=a.n(_);n.a},"4d90":function(e,t,a){"use strict";var _=a("23e7"),n=a("0ccb").start,r=a("9a0c");_({target:"String",proto:!0,forced:r},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"60d9":function(e,t,a){},"9a0c":function(e,t,a){var _=a("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(_)},c2e5:function(e,t,a){},d58f:function(e,t,a){var _=a("1c0b"),n=a("7b0b"),r=a("44ad"),o=a("50c4"),s=function(e){return function(t,a,s,i){_(a);var c=n(t),l=r(c),d=o(c.length),u=e?d-1:0,f=e?-1:1;if(s<2)while(1){if(u in l){i=l[u],u+=f;break}if(u+=f,e?u<0:d<=u)throw TypeError("Reduce of empty array with no initial value")}for(;e?u>=0:d>u;u+=f)u in l&&(i=a(i,l[u],u,c));return i}};e.exports={left:s(!1),right:s(!0)}},d76a:function(e,t,a){"use strict";a.r(t);var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",[a("div",{class:e.advanced?"search":null},[a("a-form",{attrs:{layout:"horizontal"}},[a("div",{class:e.advanced?null:"fold"},[a("a-row",[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"地区编号",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-select",{attrs:{placeholder:"请选择地区编号"},model:{value:e.SelectedPlace,callback:function(t){e.SelectedPlace=t},expression:"SelectedPlace"}},e._l(e.PlaceList,(function(t){return a("a-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"工号",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-select",{attrs:{placeholder:"请选择人员工号"},model:{value:e.SelectedStaff,callback:function(t){e.SelectedStaff=t},expression:"SelectedStaff"}},e._l(e.StaffList,(function(t){return a("a-select-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"日期",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入任务截止日期"},model:{value:e.SelectedDate,callback:function(t){e.SelectedDate=t},expression:"SelectedDate"}})],1)],1)],1)],1),a("span",{staticStyle:{float:"right","margin-top":"3px"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.PostArrange}},[e._v("提交")]),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("重置")]),a("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),a("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],1),a("div",[a("a-space",{staticClass:"operator"}),a("standard-table",{attrs:{columns:e.columns,dataSource:e.DisinfectionRecord,pagination:Object.assign({},e.pagination,{onChange:e.onPageChange})},on:{change:e.onChange,selectedRowChange:e.onSelectChange}})],1)])},n=[],r=(a("99af"),a("ac1f"),a("4d90"),a("1276"),a("3521")),o=a("cebe"),s=a.n(o),i=a("7424"),c=a("b775"),l=a("be65"),d=a.n(l),u="YES";s.a.defaults.headers.common["Authorization"]="Bearer ".concat(u);var f=[{title:"地区编号",dataIndex:"pos_id"},{title:"日期",dataIndex:"disinfection_date",needTotal:!0,customRender:function(e){return e.split("T")[0]}},{title:"是否消杀",dataIndex:"disinfection"}];function h(e){var t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),_=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(_)}var m={name:"QueryList",components:{StandardTable:r["a"]},data:function(){return{advanced:!0,columns:f,dataSource:[],pagination:{current:1,pageSize:10,total:0},StaffList:[],PlaceList:[],SelectedPlace:"",SelectedDate:"",SelectedStaff:"",DisinfectionRecord:[],SizeForm:{staff_id:"",pos_id:"",ddl_time:""}}},created:function(){this.GetAllStaff(),this.GetAllPos(),this.GetDisinfectionRecord(),this.getAuthorization()},methods:{onPageChange:function(e,t){this.pagination.current=e,this.pagination.pageSize=t,this.getData()},toggleAdvanced:function(){this.advanced=!this.advanced},GetAllStaff:function(){var e=this;s.a.get(i["ADDRESS"]+"/MedicalStaff/GetAllStaffID",{headers:{Authorization:this.Authorization}}).then((function(t){"success"===t.data.message&&(e.StaffList=t.data.StaffList)})).catch((function(e){}))},GetAllPos:function(){var e=this;s.a.get(i["ADDRESS"]+"/GetAllPos_id/GetAllPos_id",{headers:{Authorization:this.Authorization}}).then((function(t){200==t.status&&(e.PlaceList=t.data)})).catch((function(e){}))},GetDisinfectionRecord:function(){var e=this;s.a.get(i["ADDRESS"]+"/Disinfection/GetDisinfectionMessage",{headers:{Authorization:this.Authorization}}).then((function(t){200===t.status&&(e.DisinfectionRecord=t.data.MessageDetail)})).catch((function(e){}))},PostArrange:function(){this.SelectedPlace&&this.SelectedStaff&&this.SelectedDate?(this.SizeForm.pos_id=this.SelectedPlace,this.SizeForm.staff_id=this.SelectedStaff,this.SizeForm.ddl_time=h(new Date(this.SelectedDate)),this.GovermentArrangeWork(this.SizeForm)):this.$message.error("请将信息填写完整！")},GovermentArrangeWork:function(e){var t=this;s.a.post(i["ADDRESS"]+"/WorkerArrangement/GovermentArrangeWork",{},{headers:{Authorization:this.Authorization},params:{staff_id:e.staff_id,pos_id:e.pos_id,ddl_time:e.ddl_time}}).then((function(e){200==e.status&&(t.$message.success("提交成功！"),t.SizeForm.pos_id="",t.SizeForm.staff_id="",t.SizeForm.ddl_time="",t.SelectedPlace="",t.SelectedStaff="",t.SelectedDate="")})).catch((function(e){}))},getAuthorization:function(){this.Authorization=d.a.get(c["xsrfHeaderName"]).Authorization.split(" ")[1]}}},p=m,g=(a("43aa"),a("0c7c")),b=Object(g["a"])(p,_,n,!1,null,"be28eb82",null);t["default"]=b.exports},fe5f:function(e,t,a){"use strict";var _=a("60d9"),n=a.n(_);n.a}}]);