(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b13fb0b"],{"0681":function(e,t,a){"use strict";var i=a("f215"),n=a.n(i);n.a},"779e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"head-info"},[a("span",[e._v(e._s(e.title))]),a("p",[e._v(e._s(e.content))])])},n=[],r={name:"HeadInfo",props:["title","content","bordered"]},o=r,s=(a("0681"),a("0c7c")),c=Object(s["a"])(o,i,n,!1,null,"2f5611ad",null);t["a"]=c.exports},cd7f:function(e,t,a){},e42f:function(e,t,a){"use strict";var i=a("cd7f"),n=a.n(i);n.a},ec7e:function(e,t,a){var i,n,r;(function(a,o){n=[],i=o,r="function"===typeof i?i.apply(t,n):i,void 0===r||(e.exports=r)})(0,(function(){
/**
 * Vue Jsonp By LancerComet at 16:35, 2016.10.17.
 * # Carry Your World #
 *
 * @author: LancerComet
 * @license: MIT
 */
var e=null,t={install:function(t,i){t.jsonp=a,t.prototype.$jsonp=a,"number"===typeof i&&(e=i)}};function a(t,a,o){return a=a||{},o=o||e,new Promise((function(e,s){if("string"!==typeof t)throw new Error('[Vue.jsonp] Type of param "url" is not string.');var c=a.callbackQuery||"callback",l=a.callbackName||"jsonp_"+i();a[c]=l,delete a.callbackQuery,delete a.callbackName;var u=[];Object.keys(a).forEach((function(e){u=u.concat(n(e,a[e]))}));var d=r(u).join("&"),p=null;"number"===typeof o&&(p=setTimeout((function(){g(),v.removeChild(h),delete window[l],s({statusText:"Request Timeout",status:408})}),o)),window[l]=function(t){clearTimeout(p),g(),v.removeChild(h),e(t),delete window[l]};var v=document.querySelector("head"),h=document.createElement("script");function f(e){g(),clearTimeout(p),s({status:400,statusText:"Bad Request"})}function g(){h.removeEventListener("error",f)}h.addEventListener("error",f),h.src=t+(/\?/.test(t)?"&":"?")+d,v.appendChild(h)}))}function i(){return(Math.floor(1e5*Math.random())*Date.now()).toString(16)}function n(e,t){e=e.replace(/=/g,"");var a=[];switch(t.constructor){case String:case Number:case Boolean:a.push(encodeURIComponent(e)+"="+encodeURIComponent(t));break;case Array:t.forEach((function(t){a=a.concat(n(e+"[]=",t))}));break;case Object:Object.keys(t).forEach((function(i){var r=t[i];a=a.concat(n(e+"["+i+"]",r))}));break}return a}function r(e){var t=[];return e.forEach((function(e){"string"===typeof e?t.push(e):t=t.concat(r(e))})),t}return t}))},effd:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[a("head-info",{attrs:{title:"目前风险区域",content:e.AreaRisk.ReportNum+"个",bordered:!0}})],1)]),a("a-card",{staticStyle:{"margin-top":"2px"},attrs:{bordered:!1}},[a("h1",{staticClass:"title"},[e._v("区域风险管理 ")]),a("a-divider"),[a("div",[a("p"),a("a-row",[a("a-col",{attrs:{span:"4"}},[a("a-cascader",{attrs:{options:e.provinceOptions,placeholder:"请选择省"},on:{change:e.onProvinceChange},model:{value:e.selectedProvince,callback:function(t){e.selectedProvince=t},expression:"selectedProvince"}})],1),a("a-col",{attrs:{span:"4"}},[a("a-cascader",{attrs:{options:e.cityOptions,placeholder:"请选择市"},on:{change:e.onCityChange},model:{value:e.selectedCity,callback:function(t){e.selectedCity=t},expression:"selectedCity"}})],1),a("a-col",{attrs:{span:"4"}},[a("a-cascader",{attrs:{options:e.districtOptions,placeholder:"请选择区"},on:{change:e.onDistricChange},model:{value:e.selectedDistrict,callback:function(t){e.selectedDistrict=t},expression:"selectedDistrict"}})],1),a("a-button",{attrs:{type:"primary"},on:{click:e.clickConfirm}},[e._v("选择")])],1),a("a-modal",{attrs:{title:"确定风险等级"},model:{value:e.SubmitModalVisible,callback:function(t){e.SubmitModalVisible=t},expression:"SubmitModalVisible"}},[a("p",{staticClass:"item_label"},[e._v("下面将确定风险等级:")]),a("p",[e._v("您选择的区域是："+e._s(e.selectedProvince[0])+","+e._s(e.selectedCity[0])+","+e._s(e.selectedDistrict[0]))]),a("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择区域等级"},model:{value:e.dangerlevel,callback:function(t){e.dangerlevel=t},expression:"dangerlevel"}},[a("a-select-option",{attrs:{value:"高风险"}},[e._v("高风险")]),a("a-select-option",{attrs:{value:"中风险"}},[e._v("中风险")]),a("a-select-option",{attrs:{value:"低风险"}},[e._v("低风险")]),a("a-select-option",{attrs:{value:"无风险"}},[e._v("无风险")])],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{attrs:{type:"primary"},on:{click:e.cancelReport}},[e._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:e.submitReport}},[e._v("提交")])],1)],1)],1)]],2),a("a-card",{staticStyle:{"margin-top":"2px"},attrs:{bordered:!1}},[a("h1",{staticClass:"title"},[e._v("地区风险显示 ")]),a("a-divider"),a("a-list",{attrs:{grid:{gutter:24,lg:3,md:2,sm:1,xs:1},dataSource:e.currentData},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[[a("a-card",{attrs:{hoverable:!0}},[a("a-card-meta",[a("a-avatar",{staticClass:"card-avatar",attrs:{slot:"avatar",src:t.avatar,size:"large"},slot:"avatar"}),a("div",{staticStyle:{"margin-bottom":"3px"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.province)+", "+e._s(t.city)+", "+e._s(t.area))]),a("div",{staticClass:"meta-content",attrs:{slot:"description"},slot:"description"},[e._v(" 目前该地区处于： "),0===t.danger_Level?a("span",[e._v(" 无风险 ")]):1===t.danger_Level?a("span",[e._v(" 低风险 ")]):2===t.danger_Level?a("span",[e._v(" 中风险 ")]):3===t.danger_Level?a("span",[e._v(" 高风险 ")]):e._e()])],1),a("a",{attrs:{slot:"actions"},slot:"actions"},[e._v("请做好及时的管理及防护")])],1)]],2)}}])}),a("a-row",{attrs:{type:"flex",align:"middle"}},[a("a-col",{attrs:{span:8}},[a("a-pagination",{attrs:{total:e.AreaRisk.Report.length,current:e.currentPage,"page-size":e.pageSize},on:{change:e.handlePageChange}})],1),a("a-col",{attrs:{span:2}},[a("p"),a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{on:{click:function(t){return e.changePageSize(1)}}},[e._v(" 1 条/每页")]),a("a-menu-item",{on:{click:function(t){return e.changePageSize(2)}}},[e._v(" 2 条/每页")]),a("a-menu-item",{on:{click:function(t){return e.changePageSize(5)}}},[e._v(" 5 条/每页")]),a("a-menu-item",{on:{click:function(t){return e.changePageSize(10)}}},[e._v(" 10 条/每页")]),a("a-menu-item",{on:{click:function(t){return e.changePageSize(20)}}},[e._v(" 20 条/每页")])],1),a("a",[e._v(e._s(e.pageSize)+"条/每页"),a("a-icon",{attrs:{type:"down"}})],1)],1)],1),a("a-col",{attrs:{span:8}},[a("span",[e._v("跳转到第")]),a("a-input-number",{model:{value:e.jumpPage,callback:function(t){e.jumpPage=t},expression:"jumpPage"}}),a("span",[e._v("页")]),a("a-button",{attrs:{type:"default"},on:{click:e.goToPage}},[e._v("跳转")])],1)],1)],1)],1)},n=[],r=(a("d81d"),a("fb6a"),a("b0c0"),a("ac1f"),a("1276"),a("8bbf")),o=a.n(r),s=a("ec7e"),c=a.n(s),l=a("de1b"),u=a("ed3b"),d=a("779e"),p=a("cebe"),v=a.n(p),h=a("be65"),f=a.n(h),g=a("7424"),m=a("b775");o.a.use(c.a);var b={components:{HeadInfo:d["a"],"a-pagination":l["a"]},data:function(){return{AreaRisk:{Report:[],ReportNum:[]},selectedProvince:[],selectedCity:[],selectedDistrict:[],provinceOptions:[],cityOptions:[],districtOptions:[],SubmitModalVisible:!1,dangerlevel:"",pos_id:"",DeliveredAreaRisk:[],Authorization:"123",currentPage:1,pageSize:5,selectedAction:"选择",jumpPage:1,recordSelections:{},doneNum:0}},computed:{currentData:function(){var e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.AreaRisk.Report.slice(e,t)}},created:function(){this.getAreaRisk(),this.loadLocationData("中国","province")},methods:{handlePageChange:function(e){this.currentPage=e},getAreaRisk:function(){var e=this;v.a.get(g["ADDRESS"]+"/RiskLevel/SearchRiskLevel",{headers:{Authorization:this.Authorization}}).then((function(t){200==t.status&&(e.DeliveredAreaRisk=t.data,e.AreaRisk.Report=e.DeliveredAreaRisk.DangerLevelInfo,e.AreaRisk.ReportNum=e.AreaRisk.Report.length)})).catch((function(e){}))},changePageSize:function(e){this.pageSize=e,this.currentPage=1},goToPage:function(){this.jumpPage>=1&&this.jumpPage<=Math.ceil(this.AreaRisk.ReportNum/this.pageSize)?this.currentPage=this.jumpPage:(this.jumpPage=this.currentPage,u["a"].warning({title:"警告",content:"输入了非法页数！"}))},loadLocationData:function(e,t){var a=this,i="33eaa61b207861b0fe36300c6bf98dfe",n="https://restapi.amap.com/v3/config/district";"city"!==t&&"district"!==t&&""!==t||(e=e[0]),o.a.jsonp(n,{key:i,keywords:e}).then((function(e){if("1"===e.status){var i=e.districts[0].districts;a.pos_id=e.districts[0].adcode,"province"===t?a.provinceOptions=i.map((function(e){return{label:e.name,value:e.name}})):"city"===t?a.cityOptions=i.map((function(e){return{label:e.name,value:e.name}})):"district"===t&&(a.districtOptions=i.map((function(e){return{label:e.name,value:e.name}})))}}))},onProvinceChange:function(e){this.selectedCity=[],this.selectedDistrict=[],this.loadLocationData(e,"city")},onCityChange:function(e){this.selectedDistrict=[],this.loadLocationData(e,"district")},onDistricChange:function(e){this.loadLocationData(e,"")},clickConfirm:function(){void 0==this.selectedProvince[0]||void 0==this.selectedCity[0]||void 0==this.selectedDistrict[0]?u["a"].warning({title:"警告",content:"请填写完整的区域（不能有空）！"}):this.SubmitModalVisible=!0},cancelReport:function(){this.SubmitModalVisible=!1},submitReport:function(){""==this.dangerlevel?u["a"].warning({title:"警告",content:"区域风险等级为空！"}):(this.SubmitModalVisible=!1,this.sendAreaRiskInfo(this.Authorization),this.getAreaRisk())},sendAreaRiskInfo:function(e){var t={province:this.selectedProvince[0],city:this.selectedCity[0],area:this.selectedDistrict[0],dangerlevel:this.dangerlevel};"高风险"==this.dangerlevel?t.dangerlevel=3:"中风险"==this.dangerlevel?t.dangerlevel=2:"低风险"==this.dangerlevel?t.dangerlevel=1:t.dangerlevel=0,this.dangerlevel="",v.a.post(g["ADDRESS"]+"/RiskLevel/ModifyDangerLevel",{},{headers:{Authorization:e},params:{province:this.selectedProvince[0],city:this.selectedCity[0],area:this.selectedDistrict[0],dangerlevel:t.dangerlevel}}).then((function(e){e.status})).catch((function(e){}))},getAuthorization:function(){this.Authorization=f.a.get(m["default"]).Authorization.split(" ")[1]}}},y=b,k=(a("e42f"),a("0c7c")),_=Object(k["a"])(y,i,n,!1,null,"7008071a",null);t["default"]=_.exports},f215:function(e,t,a){}}]);