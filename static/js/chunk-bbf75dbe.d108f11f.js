(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bbf75dbe"],{"16b0":function(t,e,a){"use strict";var n=a("ba24"),i=a.n(n);i.a},"5f75":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("a-steps",{staticClass:"steps",attrs:{current:t.current}},[a("a-step",{attrs:{title:t.$t("input")}}),a("a-step",{attrs:{title:t.$t("confirm")}}),a("a-step",{attrs:{title:t.$t("complete")}})],1),a("div",{staticClass:"content"},[0===t.current?a("step1",{on:{nextStep:t.nextStep}}):t._e(),1===t.current?a("step2",{on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),2===t.current?a("step3",{on:{prevStep:t.prevStep,finish:t.finish}}):t._e()],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticStyle:{"max-width":"500px",margin:"40px auto 0"}},[a("a-form-item",{attrs:{label:t.$t("name"),labelCol:{span:7},wrapperCol:{span:17},required:""}},[a("a-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.inputName,callback:function(e){t.inputName=e},expression:"inputName"}})],1),a("a-form-item",{attrs:{label:t.$t("gender"),labelCol:{span:7},wrapperCol:{span:17},required:""}},[a("a-select",{attrs:{placeholder:"请选择性别"},model:{value:t.inputGender,callback:function(e){t.inputGender=e},expression:"inputGender"}},[a("a-select-option",{attrs:{value:"1"}},[t._v("男")]),a("a-select-option",{attrs:{value:"2"}},[t._v("女")])],1)],1),a("a-form-item",{attrs:{label:t.$t("age"),labelCol:{span:7},wrapperCol:{span:17},required:""}},[a("a-input",{attrs:{placeholder:"请输入年龄"},model:{value:t.inputAge,callback:function(e){t.inputAge=e},expression:"inputAge"}})],1),a("a-form-item",{attrs:{label:t.$t("telephone"),labelCol:{span:7},wrapperCol:{span:17},required:""}},[a("a-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.inputPhone,callback:function(e){t.inputPhone=e},expression:"inputPhone"}})],1),a("a-form-item",{staticClass:"requiredLabel",attrs:{label:t.$t("ID_num"),labelCol:{span:7},wrapperCol:{span:17},required:""}},[a("a-input",{attrs:{placeholder:"请输入身份证号"},model:{value:t.inputID,callback:function(e){t.inputID=e},expression:"inputID"}})],1),a("a-form-item",{attrs:{label:t.$t("date"),labelCol:{span:7},wrapperCol:{span:17},required:""}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入预约日期"},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1),a("a-alert",{staticStyle:{"margin-bottom":"24px","white-space":"pre"},attrs:{closable:!0,message:t.$t("note1")}}),a("a-form",{attrs:{layout:"horizontal"}},[a("div",{class:t.advanced?null:"fold"},[a("a-row",[a("a-col",{attrs:{span:"5"}},[a("a-cascader",{attrs:{options:t.provinceOptions,placeholder:"请选择省"},on:{change:t.onProvinceChange},model:{value:t.selectedProvince,callback:function(e){t.selectedProvince=e},expression:"selectedProvince"}})],1),a("a-col",{attrs:{span:"5"}},[a("a-cascader",{attrs:{options:t.cityOptions,placeholder:"请选择市"},on:{change:t.onCityChange},model:{value:t.selectedCity,callback:function(e){t.selectedCity=e},expression:"selectedCity"}})],1),a("a-col",{attrs:{span:"5"}},[a("a-cascader",{attrs:{options:t.districtOptions,placeholder:"请选择区"},on:{change:t.onDistrictChange},model:{value:t.selectedDistrict,callback:function(e){t.selectedDistrict=e},expression:"selectedDistrict"}})],1),a("a-col",{attrs:{span:"5"}},[a("a-cascader",{attrs:{options:t.streetOptions,placeholder:"请选择街道"},model:{value:t.selectedStreet,callback:function(e){t.selectedStreet=e},expression:"selectedStreet"}})],1),a("a-button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary"},on:{click:t.handleQuery}},[t._v("查询")])],1)],1)]),a("a-col",{attrs:{span:"6"}},[a("a-cascader",{staticStyle:{"margin-top":"16px"},attrs:{options:t.hospitalOptions,placeholder:"请选择医疗点"},model:{value:t.selectedHospital,callback:function(e){t.selectedHospital=e},expression:"selectedHospital"}})],1),a("a-button",{staticStyle:{"margin-top":"16px"},attrs:{type:"primary"},on:{click:t.nextStep}},[t._v(t._s(t.$t("nextStep")))]),a("a-form-item",{attrs:{wrapperCol:{span:17,offset:7}}})],1)],1)},o=[],r=(a("99af"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("cebe")),c=a.n(r),l=a("8bbf"),p=a.n(l),u=a("ec7e"),d=a.n(u),h=a("be65"),m=a.n(h),f=a("b775"),v=a("7424");p.a.use(d.a);var b={name:"Step1",data:function(){return{inputName:null,inputGender:null,inputPhone:null,inputAge:null,inputID:null,selectedProvince:[],selectedCity:[],selectedDistrict:[],selectedStreet:[],selectedHospital:[],provinceOptions:[],cityOptions:[],districtOptions:[],streetOptions:[],hospitalOptions:[],selectedDate:null,loading:!0,Autorization:null,advanced:!0}},created:function(){this.loadLocationData("中国","province"),this.getAuthorization()},i18n:a("6ba9"),methods:{nextStep:function(){if(this.inputName)if(this.inputGender)if(this.inputAge)if(this.inputPhone)if(this.inputID)if(this.selectedDate)if(void 0==this.selectedProvince[0]||void 0==this.selectedCity[0]||void 0==this.selectedDistrict[0]||void 0==this.selectedStreet[0]||void 0==this.selectedHospital[0])alert("请填写完整信息！");else{var t=this;this.$confirm("预约信息一经上传，无法取消！","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.postNuclein()})).catch((function(){}))}else alert("请选择日期！");else alert("请输入身份证号！");else alert("请输入手机号！");else alert("请输入年龄！");else alert("请选择性别！");else alert("请输入姓名！")},getAuthorization:function(){this.Authorization=m.a.get(f["xsrfHeaderName"]).Authorization.split(" ")[1]},handleQuery:function(){var t=this;void 0==this.selectedProvince[0]||void 0==this.selectedCity[0]||void 0==this.selectedDistrict[0]||void 0==this.selectedStreet[0]?alert("请填写完整信息！"):c.a.get(v["ADDRESS"]+"/HosInfo/SearchHosInfo",{params:{province:this.selectedProvince[0],city:null,district:null,street:null},headers:{Authorization:this.Authorization}}).then((function(e){for(var a=e.data.hospital_Info,n=a.length,i=[],s=0;s<n;s++){var o={key:s,provinceIndex:t.selectedProvince,cityIndex:t.selectedCity,districtIndex:t.selectedDistrict,streetIndex:t.selectedStreet,nameIndex:a[s].hos_name,cur_amountIndex:a[s].current_num_of_people,max_amountIndex:a[s].max_num_of_people};i.push(o)}t.dataSource=i;for(var r=[],c=0;c<n;c++){var l={label:a[c].hos_name,value:a[c].hos_name};r.push(l)}t.hospitalOptions=r})).catch((function(t){alert("获取医疗点信息失败！")}))},loadLocationData:function(t,e){var a=this,n="33eaa61b207861b0fe36300c6bf98dfe",i="https://restapi.amap.com/v3/config/district";"city"!==e&&"district"!==e&&"street"!==e||(t=t[0]),p.a.jsonp(i,{key:n,keywords:t}).then((function(t){if("1"===t.status){var n=t.districts[0].districts;"province"===e?a.provinceOptions=n.map((function(t){return{label:t.name,value:t.name}})):"city"===e?a.cityOptions=n.map((function(t){return{label:t.name,value:t.name}})):"district"===e?a.districtOptions=n.map((function(t){return{label:t.name,value:t.name}})):"street"===e&&(a.streetOptions=n.map((function(t){return{label:t.name,value:t.name}})))}}))},onProvinceChange:function(t){this.selectedCity=[],this.selectedDistrict=[],this.selectedStreet=[],this.selectedHospital=[],this.loadLocationData(t,"city")},onCityChange:function(t){this.selectedDistrict=[],this.selectedStreet=[],this.selectedHospital=[],this.loadLocationData(t,"district")},onDistrictChange:function(t){this.selectedStreet=[],this.selectedHospital=[],this.loadLocationData(t,"street")},postNuclein:function(){var t=this,e=this.selectedDate.format("YYYY"),a=this.selectedDate.format("MM"),n=this.selectedDate.format("DD"),i=this.selectedDate.format("HH:mm:ss"),s="".concat(e,"-").concat(a,"-").concat(n,"T").concat(i);c.a.post(v["ADDRESS"]+"/Reservevation/Reservevation",{},{params:{time:s,type:1,hos_name:this.selectedHospital[0]},headers:{Authorization:this.Authorization}}).then((function(e){t.$emit("nextStep")})).catch((function(t){alert("预约失败，请重试！"),location.reload()}))}}},g=b,x=a("0c7c"),S=Object(x["a"])(g,s,o,!1,null,"6d739f01",null),y=S.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticStyle:{"max-width":"500px",margin:"30px auto 0"}},[a("a-card",{staticStyle:{"margin-bottom":"20px","white-space":"pre-line"}},[t._v(" 温馨提示："),a("br"),t._v(" 请仔细核对个人信息，信息确认后，预约订单将自动上传，无法取消！"),a("br"),t._v(" 个人信息如需更改，请返回上一步进行相应操作! ")]),a("a-alert",{staticStyle:{"margin-bottom":"24px"},attrs:{closable:!0,message:t.$t("note")}}),a("a-form-item",{attrs:{wrapperCol:{span:17,offset:7}}},[a("a-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.nextStep}},[t._v(t._s(t.$t("submit")))]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.prevStep}},[t._v(t._s(t.$t("preStep")))])],1)],1)],1)},C=[],_={name:"Step2",i18n:a("6ba9"),data:function(){return{loading:!1}},methods:{nextStep:function(){var t=this;t.loading=!0,setTimeout((function(){t.$emit("nextStep")}),1500)},prevStep:function(){this.$emit("prevStep")}}},A=_,w=(a("16b0"),Object(x["a"])(A,D,C,!1,null,"4a1b9449",null)),k=w.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"max-width":"500px",margin:"40px auto 0","text-align":"center"}},[a("result",{attrs:{title:t.$t("success"),"is-success":!0}}),a("div",{ref:"qrCodeUrl",staticClass:"qrcode",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}}),a("a-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:t.doOnceAgin}},[t._v(t._s(t.$t("doAgain")))])],1)},O=[],I=(a("96cf"),a("1da1")),z=a("84a9"),H=a("d044"),P=a.n(H),N={name:"Step3",i18n:a("6ba9"),components:{Result:z["a"]},data:function(){return{qrcode:null,user_id:null,type:null,Authorization:null}},created:function(){this.getAuthorization()},methods:{doOnceAgin:function(){this.$emit("finish")},getAuthorization:function(){this.Authorization=m.a.get(f["xsrfHeaderName"]).Authorization.split(" ")[1]},createQrCode:function(){var t=this.user_id,e=this.type,a="用户ID: ".concat(t,", \n预约类型: ").concat(e);this.qrcode=new P.a(this.$refs.qrCodeUrl,{text:a,width:100,height:100,colorDark:"#000000",colorLight:"#ffffff",correctLevel:P.a.CorrectLevel.H})},getInfo:function(){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.get(v["ADDRESS"]+"/QRcode/AppointmentQRcode",{headers:{Authorization:t.Authorization}});case 3:a=e.sent,n=a.data,t.user_id=n.user_id,t.type=n.type,t.createQrCode(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),alert("二维码生成失败！");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}},mounted:function(){this.getInfo()}},q=N,R=Object(x["a"])(q,$,O,!1,null,"a5f4da26",null),L=R.exports,j={name:"StepForm",i18n:a("6ba9"),components:{Step1:y,Step2:k,Step3:L},data:function(){return{current:0}},computed:{desc:function(){return this.$t("pageDesc")}},methods:{nextStep:function(){0==this.current&&(this.current=2)},prevStep:function(){this.current>0&&(this.current-=1)},finish:function(){this.current=0}}},E=j,Q=(a("6bd5"),Object(x["a"])(E,n,i,!1,null,"15c61890",null));e["default"]=Q.exports},"6ba9":function(t,e){t.exports={messages:{CN:{pageDesc:"将疫苗预约过程拆分成多个步骤，指导用户完成。",input:"请填写预约信息",confirm:"确认预约信息",complete:"完成",name:"姓名",gender:"性别",age:"年龄",ID_num:"身份证号",telephone:"手机号",date:"预约日期",hospital:"医疗点名称",payment:"付款账户",collection:"收款账户",alipay:"支付宝",wechat:"微信",collectionName:"收款人姓名",transferAmount:"支付金额",nextStep:"下一步",preStep:"上一步",submit:"提交",note:'若个人信息无误，请点击"提交"按钮上传订单！',note1:"                                                请选择医疗点！",success:"预约成功",doAgain:"再次预约",bill:"查看订单"},HK:{pageDesc:"將一個冗長或用戶不熟悉的表單任務分成多個步驟，指導用戶完成。",input:"請填寫轉賬信息",confirm:"確認轉賬信息",complete:"完成",payment:"付款賬戶",collection:"收款賬戶",alipay:"支付寶",wechat:"微信",collectionName:"收款人姓名",transferAmount:"裝張金額",nextStep:"下一步",preStep:"上一步",submit:"提交",note:"確認轉賬後，現金將直接打入對方賬戶，無法退回。",success:"支付完成",doAgain:"再轉一筆",bill:"查看賬單"},US:{pageDesc:"Divide a long or unfamiliar form task into several steps to guide the user to complete it.",input:"Fill transfer information",confirm:"Confirm transfer information",complete:"Complete",payment:"Payment account",collection:"Collection account",alipay:"Alipay",wechat:"Wechat",collectionName:"Name of payee",transferAmount:"Transfer amount",nextStep:"Next",preStep:"Back",submit:"Submit",note:"After confirming the transfer, the funds will be directly transferred into the other party's account and cannot be returned.",success:"Payment successful",doAgain:"Do Again",bill:"Check the bill"}}}},"6bd5":function(t,e,a){"use strict";var n=a("c409"),i=a.n(n);i.a},ba24:function(t,e,a){},c409:function(t,e,a){}}]);