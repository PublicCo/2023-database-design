(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50842dd0"],{"0681":function(t,e,n){"use strict";var a=n("f215"),i=n.n(a);i.a},"42a1":function(t,e,n){},6531:function(t,e,n){"use strict";var a=n("42a1"),i=n.n(a);i.a},"779e":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"head-info"},[n("span",[t._v(t._s(t.title))]),n("p",[t._v(t._s(t.content))])])},i=[],s={name:"HeadInfo",props:["title","content","bordered"]},r=s,o=(n("0681"),n("0c7c")),c=Object(o["a"])(r,a,i,!1,null,"2f5611ad",null);e["a"]=c.exports},"8a94":function(t,e,n){},"8ff8":function(t,e,n){"use strict";var a=n("8a94"),i=n.n(a);i.a},"96e8":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[a("head-info",{attrs:{title:"我的待办",content:t.vaccinationRequest.taskNum+"个任务",bordered:!0}}),a("head-info",{attrs:{title:"我的已办",content:t.doneNum+"个任务",bordered:!0}})],1)]),a("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1,title:"疫苗申请"}},[t._l(t.currentData,(function(e){return a("div",{key:e.hos_id},[a("detail-list",[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-list-item-meta",{attrs:{description:e.hos_id}},[a("a-avatar",{attrs:{slot:"avatar",size:"large",shape:"square",src:n("a656")},slot:"avatar"}),a("a",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.description?e.description:"医院名称"))])],1)],1),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"list-content"},[a("div",{staticClass:"list-content-item"},[a("span",[t._v("申请数量")]),a("p",[t._v(t._s(e.number))])]),a("div",{staticClass:"list-content-item"},[a("span",[t._v("申请时间")]),a("p",[t._v(t._s(e.time))])]),a("div",{staticClass:"list-content-item"},[a("a-progress",{staticStyle:{width:"180px"},attrs:{percent:e.percent}})],1)])]),a("a-col",{attrs:{span:1}},[a("p"),a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{on:{click:function(n){return t.handleAction("通过",e)}}},[t._v("通过")]),a("a-menu-item",{on:{click:function(n){return t.handleAction("拒绝",e)}}},[t._v("拒绝")])],1),a("a",[t._v(t._s(t.recordSelections[e.hos_id]||"选择")),a("a-icon",{attrs:{type:"down"}})],1)],1)],1),a("a-col",{attrs:{span:1}},[a("p"),a("a",{on:{click:function(n){return t.handleConfirm(e)}}},[t._v("确定")])])],1)],1),a("a-divider")],1)})),a("a-row",{attrs:{type:"flex",align:"middle"}},[a("a-col",{attrs:{span:8}},[a("a-pagination",{attrs:{total:t.vaccinationRequest.UnModifiedReport.length,current:t.currentPage,"page-size":t.pageSize},on:{change:t.handlePageChange}})],1),a("a-col",{attrs:{span:2}},[a("p"),a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{on:{click:function(e){return t.changePageSize(1)}}},[t._v(" 1 条/每页")]),a("a-menu-item",{on:{click:function(e){return t.changePageSize(2)}}},[t._v(" 2 条/每页")]),a("a-menu-item",{on:{click:function(e){return t.changePageSize(5)}}},[t._v(" 5 条/每页")]),a("a-menu-item",{on:{click:function(e){return t.changePageSize(10)}}},[t._v(" 10 条/每页")]),a("a-menu-item",{on:{click:function(e){return t.changePageSize(20)}}},[t._v(" 20 条/每页")])],1),a("a",[t._v(t._s(t.pageSize)+"条/每页"),a("a-icon",{attrs:{type:"down"}})],1)],1)],1),a("a-col",{attrs:{span:8}},[a("span",[t._v("跳转到第")]),a("a-input-number",{model:{value:t.jumpPage,callback:function(e){t.jumpPage=e},expression:"jumpPage"}}),a("span",[t._v("页")]),a("a-button",{attrs:{type:"default"},on:{click:t.goToPage}},[t._v("跳转")])],1)],1)],2)],1)},i=[],s=(n("c740"),n("d81d"),n("fb6a"),n("a434"),n("ac1f"),n("1276"),n("5530")),r=n("de1b"),o=n("ed3b"),c=n("779e"),u=n("c340"),l=n("cebe"),d=n.n(l),p=n("7424"),h=n("b775"),f=n("be65"),m=n.n(f),v={components:{HeadInfo:c["a"],"a-pagination":r["a"],DetailList:u["a"]},data:function(){return{vaccinationRequest:{taskNum:"",UnModifiedReport:[]},Authorization:"123",currentPage:1,pageSize:5,selectedAction:"选择",jumpPage:1,recordSelections:{},doneNum:0}},computed:{currentData:function(){var t=this,e=(this.currentPage-1)*this.pageSize,n=e+this.pageSize;return this.vaccinationRequest.UnModifiedReport.slice(e,n).map((function(e){var n=t.recordSelections[e.hos_id];return"通过"===n?Object(s["a"])(Object(s["a"])({},e),{},{percent:100}):"拒绝"===n?Object(s["a"])(Object(s["a"])({},e),{},{percent:0}):Object(s["a"])(Object(s["a"])({},e),{},{percent:50})}))}},created:function(){this.getUndoneVaccinationRequest()},methods:{handlePageChange:function(t){this.currentPage=t},getUndoneVaccinationRequest:function(){var t=this;this.getAuthorization(),d.a.get(p["ADDRESS"]+"/Vaccine/GetNotHandledAppointmen",{headers:{Authorization:this.Authorization}}).then((function(e){200==e.status&&(t.DeliveredVaccinationRequest=e.data,t.vaccinationRequest.taskNum=t.DeliveredVaccinationRequest.length,t.vaccinationRequest.UnModifiedReport=t.DeliveredVaccinationRequest.sort((function(t,e){return new Date(t.time)-new Date(e.time)})))})).catch((function(t){}))},handleAction:function(t,e){this.$set(this.recordSelections,e.hos_id,t),""===t?this.$set(e,"progressPercent",50):"通过"===t?this.$set(e,"progressPercent",100):"拒绝"===t&&this.$set(e,"progressPercent",0)},handleConfirm:function(t){var e=this.recordSelections[t.hos_id];if(e){var n={hos_id:t.hos_id,status:e};this.sendModifyApplication(n,this.Authorization);var a=this.vaccinationRequest.UnModifiedReport.findIndex((function(e){return e.hos_id===t.hos_id}));-1!==a&&(this.vaccinationRequest.UnModifiedReport.splice(a,1),this.vaccinationRequest.taskNum--,this.doneNum++),this.$set(this.recordSelections,t.hos_id,null)}else o["a"].warning({title:"警告",content:"请先选择一个操作再确定！"})},sendModifyApplication:function(t,e){d.a.put(p["ADDRESS"]+"/Vaccine/HandleAppointment",{},{headers:{Authorization:e},params:{hos_id:t.hos_id,status:t.status}}).then((function(t){t.status})).catch((function(t){}))},changePageSize:function(t){this.pageSize=t,this.currentPage=1},goToPage:function(){this.jumpPage>=1&&this.jumpPage<=Math.ceil(this.vaccinationRequest.taskNum/this.pageSize)?this.currentPage=this.jumpPage:(this.jumpPage=this.currentPage,o["a"].warning({title:"警告",content:"输入了非法页数！"}))},getAuthorization:function(){this.Authorization=m.a.get(h["default"]).Authorization.split(" ")[1]}}},g=v,_=(n("8ff8"),n("0c7c")),b=Object(_["a"])(g,a,i,!1,null,"36715910",null);e["default"]=b.exports},a656:function(t,e,n){t.exports=n.p+"static/img/hos_logo.428b9810.png"},c340:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["detail-list","small"===t.size?"small":"large","vertical"===t.layout?"vertical":"horizontal"]},[t.title?n("div",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),n("a-row",[t._t("default")],2)],1)},i=[],s=(n("a9e3"),n("da05")),r={name:"DetailListItem",props:{term:{type:String,required:!1}},inject:{col:{type:Number}},methods:{renderTerm:function(t,e){return e?t("div",{attrs:{class:"term"}},[e]):null},renderContent:function(t,e){return t("div",{attrs:{class:"content"}},[e])}},render:function(t){var e=this.renderTerm(t,this.$props.term),n=this.renderContent(t,this.$slots.default);return t(s["b"],{props:o[this.col]},[e,n])}},o={1:{xs:24},2:{xs:24,sm:12},3:{xs:24,sm:12,md:8},4:{xs:24,sm:12,md:6}},c={name:"DetailList",Item:r,props:{title:{type:String,required:!1},col:{type:Number,required:!1,default:3},size:{type:String,required:!1,default:"large"},layout:{type:String,required:!1,default:"horizontal"}},provide:function(){return{col:this.col>4?4:this.col}}},u=c,l=(n("6531"),n("0c7c")),d=Object(l["a"])(u,a,i,!1,null,null,null);e["a"]=d.exports},f215:function(t,e,n){}}]);