(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b3f07d9"],{"0681":function(t,s,a){"use strict";var e=a("f215"),i=a.n(e);i.a},5975:function(t,s,a){"use strict";var e=a("8237"),i=a.n(e);i.a},"779e":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"head-info"},[a("span",[t._v(t._s(t.title))]),a("p",[t._v(t._s(t.content))])])},i=[],n={name:"HeadInfo",props:["title","content","bordered"]},r=n,o=(a("0681"),a("0c7c")),d=Object(o["a"])(r,e,i,!1,null,"2f5611ad",null);s["a"]=d.exports},8237:function(t,s,a){},dd8c:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[a("head-info",{attrs:{title:"待消杀任务",content:t.unfinished_num,bordered:!0}}),a("head-info",{attrs:{title:"已完成消杀任务",content:t.finished_num}})],1)]),a("a-card",{staticStyle:{"margin-top":"24px"},attrs:{bordered:!1,title:"消杀任务"}},[a("a-list",{attrs:{size:"large"}},t._l(t.dataItems,(function(s){return a("a-list-item",{key:s.key},[a("a-list-item-meta",{attrs:{description:s.pos_id}},[a("a",{attrs:{slot:"title"},slot:"title"},[t._v("消杀地点")])]),a("div",{attrs:{slot:"actions"},slot:"actions"},[a("a",{on:{click:function(){return t.finishWork(s.key)}}},[t._v("完成")])]),a("div",{staticClass:"list-content"},[a("div",{staticClass:"list-content-item"},[a("span",[t._v("安排者ID")]),a("p",[t._v(t._s(s.manager_id))])]),a("div",{staticClass:"list-content-item"},[a("span",[t._v("状态")]),a("p",[t._v(t._s(s.status))])]),a("div",{staticClass:"list-content-item"},[a("span",[t._v("截止时间")]),a("p",[t._v(t._s(s.ddl_time))])]),a("div",{staticClass:"list-content-item"},["已完成"===s.status?a("a-progress",{staticStyle:{width:"180px"},attrs:{percent:100}}):"超时完成"===s.status?a("a-progress",{staticStyle:{width:"180px"},attrs:{percent:100,strokeColor:"yellow"}}):a("a-progress",{staticStyle:{width:"180px"},attrs:{percent:0}})],1)])],1)})),1)],1)],1)},i=[],n=(a("ac1f"),a("1276"),a("cebe")),r=a.n(n),o=a("779e"),d=a("7424"),c=a("be65"),u=a.n(c),h=a("b775"),l={name:"StandardList",components:{HeadInfo:o["a"]},mounted:function(){this.fetchArrangement()},created:function(){this.getAuthorization()},data:function(){return{dataItems:[],finished_num:0,unfinished_num:0,Authorization:"123"}},methods:{getAuthorization:function(){this.Authorization=u.a.get(h["xsrfHeaderName"]).Authorization.split(" ")[1]},fetchArrangement:function(){var t=this;r.a.get(d["ADDRESS"]+"/WorkerArrangement/GetWork",{headers:{Authorization:this.Authorization}}).then((function(s){for(var a=0;a<s.data.length;a++){var e={key:t.dataItems.length+1,pos_id:s.data[a].pos_id,manager_id:s.data[a].manager_id,status:s.data[a].status,ddl_time:s.data[a].ddl_time};t.dataItems.push(e)}t.countWork()})).catch((function(t){}))},countWork:function(){this.finished_num=0,this.unfinished_num=0;for(var t=0;t<this.dataItems.length;t++)"未完成"==this.dataItems[t].status?this.unfinished_num++:"已完成"!=this.dataItems[t].status&&"超时完成"!=this.dataItems[t].status||this.finished_num++},finishWork:function(t){if(t--,"未完成"===this.dataItems[t].status){var s=new Date;s>this.dataItems[t].ddl_time?this.dataItems[t].status="超时完成":this.dataItems[t].status="已完成",this.countWork(),this.postWork(t)}},postWork:function(t){var s=this;t--;var a=new Date;r.a.post(d["ADDRESS"]+"/WorkerArrangement/PostWork",{params:{manager_id:this.dataItems[t].manager_id,pos_id:this.dataItems[t].pos_id,ddl_time:this.dataItems[t].ddl_time,done_time:a},headers:{Authorization:"Bearer your_token_here"}}).then((function(t){t?s.$message.success("工作状态上传成功"):s.$message.info("未上传成功")}))}}},m=l,f=(a("5975"),a("0c7c")),_=Object(f["a"])(m,e,i,!1,null,"763173ac",null);s["default"]=_.exports},f215:function(t,s,a){}}]);