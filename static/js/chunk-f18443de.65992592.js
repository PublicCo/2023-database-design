(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f18443de"],{"80c1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bod"},[a("div",{staticClass:"main-box"},[a("a-form",{attrs:{form:e.form},on:{submit:e.onSubmit}},[a("div",{class:["container","container-login",{"is-txl is-z200":e.logging}]},[a("a-form-item",[a("form",[a("h1",{staticClass:"title"},[e._v("Sign in to Website")])]),a("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticStyle:{position:"absolute",top:"0",left:"0","margin-top":"-24px","margin-bottom":"0",width:"100%"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""}}),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!1,message:"请输入账户名",whitespace:!0}]}],expression:"['id', {rules: [{ required: false, message: '请输入账户名', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{autocomplete:"on",size:"large",placeholder:"请输入账户ID"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!1,message:"请输入密码",whitespace:!0}]}],expression:"['password', {rules: [{ required: false, message: '请输入密码', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"请输入密码",autocomplete:"on",type:"password"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ValidateCode",{rules:[{required:!1,message:"请输入验证码",whitespace:!0}]}],expression:"['ValidateCode', {rules: [{ required: false, message: '请输入验证码', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"请输入验证码",type:"text"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-button",{attrs:{type:"dash"},on:{click:function(t){return t.stopPropagation(),e.onValidateClick(t)}}},[e._v(" 获取验证码 ")]),null!==e.ImageUrl?a("div",[a("img",{attrs:{src:this.ImageUrl,alt:"image"}})]):e._e(),a("a-form-item",[a("a-button",{staticClass:"btn",staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:!e.logging,size:"large",htmlType:"submit",type:"primary"},on:{click:e.onLoginClick}},[e._v("登录 "),a("span"),a("span"),a("span"),a("span")])],1)],1)],1),a("div",{class:["container","container-register",{"is-txl":e.logging}]},[a("a-button",{staticClass:"btn",staticStyle:{width:"15%","margin-top":"24px",display:"flex","align-items":"center","justify-content":"center"},attrs:{type:"primary"},on:{click:e.showDrawer}},[e._v(" 注册 "),a("span"),a("span"),a("span"),a("span")])],1),a("div",{class:["switch",{login:e.logging}]},[a("div",{staticClass:"switch__circle"}),a("div",{staticClass:"switch__circle switch__circle_top"}),a("div",{staticClass:"switch__container"},[a("h2",[e._v(e._s(e.logging?"Hello Friend !":"Welcome Back !"))]),a("p",[e._v(" "+e._s(e.logging?"Enter your personal details and start journey with us":"To keep connected with us please login with your personal info")+" ")]),a("a-button",{staticClass:"btn",staticStyle:{display:"flex","align-items":"center","justify-content":"center"},on:{click:e.onSwitchButtonClick}},[e._v(" "+e._s(e.logging?"立即注册":"立即登录")+" "),a("span"),a("span"),a("span"),a("span")])],1)])])],1),a("a-drawer",{attrs:{title:"Create a new account",width:720,visible:e.drawerVisible,"body-style":{paddingBottom:"80px"},"footer-style":{textAlign:"right"}},on:{close:e.closeDrawer}},[a("a-form",{attrs:{form:e.form},on:{submit:e.submitForm}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginName",{rules:[{required:!1,message:"请输入姓名",whitespace:!0}]}],expression:"['loginName', {rules: [{ required: false, message: '请输入姓名', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"姓名",autocomplete:"on",type:"text"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginID",{rules:[{required:!1,message:"请输入身份证",whitespace:!0}]}],expression:"['loginID', {rules: [{ required: false, message: '请输入身份证', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"身份证",autocomplete:"on",type:"text"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phoneNumber",{rules:[{required:!1,message:"请输入电话号码",whitespace:!0}]}],expression:"['phoneNumber', {rules: [{ required: false, message: '请输入电话号码', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"请输入电话号码",autocomplete:"on",type:"text"}},[a("a-icon",{attrs:{slot:"prefix",type:"phone"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender",{rules:[{required:!1,message:"请输入你的性别",whitespace:!0}]}],expression:"['gender', {rules: [{ required: false, message: '请输入你的性别', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"请输入你的性别",autocomplete:"on",type:"text"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!1,message:"请输入你的住址",whitespace:!0}]}],expression:"['address', {rules: [{ required: false, message: '请输入你的住址', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"请输入你的住址",autocomplete:"on",type:"text"}},[a("a-icon",{attrs:{slot:"prefix",type:"home"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginPassword",{rules:[{required:!1,message:"请输入密码",whitespace:!0}]}],expression:"['loginPassword', {rules: [{ required: false, message: '请输入密码', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"密码",autocomplete:"on",type:"text"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["passwordForSure",{rules:[{required:!1,message:"请再次输入密码",whitespace:!0}]}],expression:"['passwordForSure', {rules: [{ required: false, message: '请再次输入密码', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"请再次输入密码",autocomplete:"on",type:"text"}},[a("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginValidateCode",{rules:[{required:!1,message:"请输入验证码",whitespace:!0}]}],expression:"['loginValidateCode', {rules: [{ required: false, message: '请输入验证码', whitespace: true}]}]"}],staticStyle:{width:"300px"},attrs:{size:"large",placeholder:"请输入验证码",autocomplete:"on",type:"text"}},[a("a-icon",{attrs:{slot:"prefix",type:"message"},slot:"prefix"})],1)],1),a("a-button",{attrs:{type:"dash"},on:{click:e.onValidateClick2}},[e._v(" 获取验证码 ")]),null!==e.ImageUrl2?a("div",[a("img",{attrs:{src:e.ImageUrl2,alt:"image"}})]):e._e(),a("a-button",{staticClass:"btn",staticStyle:{width:"15%","margin-top":"24px",display:"flex","align-items":"center","justify-content":"center"},attrs:{type:"primary","html-type":"submit"},on:{click:e.onSubmitLogup}},[e._v(" 提交注册信息 "),a("span"),a("span"),a("span"),a("span")])],1)],1)],1)},i=[],s=(a("99af"),a("ac1f"),a("1276"),a("5530")),o=a("93d6"),n=a("b775"),l=a("89a5"),c=a("5880"),d=a("7424"),u=a("cebe"),p=a.n(u),m={name:"Login",data:function(){return{logging:!1,error:"",form:this.$form.createForm(this),ValidateKey:null,ValidateCodeImage:null,ImageUrl:null,ImageUrl2:null,userType:null,id:null,Date:(new Date).toISOString().split("T")[0],drawerVisible:!1}},computed:{systemName:function(){return this.$store.state.setting.systemName}},created:function(){var e=this;this.Update(this.Date),setInterval((function(){e.Update(e.Date)}),864e5)},methods:Object(s["a"])(Object(s["a"])({},Object(c["mapMutations"])("account",["setUser","setPermissions","setRoles"])),{},{getRandomString:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",a=0;a<5;a++){var r=Math.floor(Math.random()*e.length);t+=e.charAt(r)}return t},onValidateClick:function(){this.ValidateKey=this.getRandomString(),this.ImageUrl=d["ADDRESS"]+"/Login/GetValidateCodeImages?t=".concat(this.ValidateKey)},getCurrentTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),i=e.getHours(),s=e.getMinutes(),o=e.getSeconds(),n=e.getMilliseconds();return"当前时间：".concat(t,"-").concat(a,"-").concat(r,"T").concat(i,":").concat(s,":").concat(o,".").concat(n,"Z")},onSubmitLogup:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e){if(!e){var a=t.form.getFieldValue("loginName"),r=t.form.getFieldValue("loginID"),i=t.form.getFieldValue("phoneNumber"),s=t.form.getFieldValue("gender"),n=t.form.getFieldValue("loginPassword"),l=t.form.getFieldValue("passwordForSure"),c=t.form.getFieldValue("loginValidateCode"),d=t.form.getFieldValue("address"),u=/^.{18}$/;if(n!==l)return void(t.error="请确认两次密码输入一致");if(!u.test(r))return void(t.error="请确认身份证ID格式是否正确");if(void 0==a||void 0==r||void 0==i||void 0==s||void 0==n||void 0==l||void 0==c)return void(t.error="请完整的输入注册信息");Object(o["d"])(a,r,i,s,n,t.ValidateKey,c,d).then((function(e){e.data,t.userType=0,Object(o["b"])(r,n,t.ValidateKey,c,t.userType).then(t.afterLogin)})).catch((function(e){t.error=e}))}}))},onLoginClick:function(){this.logging=!0,this.onSubmit()},onSwitchButtonClick:function(){this.logging=!this.logging},onSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e){if(!e){t.id=t.form.getFieldValue("id");var a=t.form.getFieldValue("password"),r=t.form.getFieldValue("ValidateCode"),i=/^.{18}$/,s=/^.{10}$/,n=/^.{5}$/;if(i.test(t.id))t.userType=0;else if(s.test(t.id))t.userType=1;else{if(!n.test(t.id))return void(t.error="id格式错误");t.userType=2}Object(o["b"])(t.id,a,t.ValidateKey,r,t.userType).then(t.afterLogin).catch((function(e){t.error="登录出错"}))}}))},afterLogin:function(e){var t,a=this,r=e.data.resultDto,i=r.token,s=[{id:null,operation:["add","edit","delete"]}];2==this.userType?s[0].id="manager":1==this.userType?s[0].id="staff":0==this.userType&&(s[0].id="user"),this.setRoles(s),1==this.userType?t={name:"工作人员"+r.user.worker_id,phone:r.user.phone_number,hos_id:r.user.hos_id,pos_id:r.user.pos_id,id:this.id}:0==this.userType?t={id:this.id,name:r.user.user_name,gender:r.user.gender,phone:r.user.phone_number,address:r.user.yser_address}:2==this.userType&&(t={id:this.id,province:r.user.province,city:r.user.city,area:r.user.area,phone:r.user.phone_number,name:"管理员"+this.id}),this.setUser(t),Object(n["h"])({token:i}),Object(o["a"])(s).then((function(e){var t=e.data.data;Object(l["d"])(t),a.$router.push("/Homepage/main"),a.$message.success("欢迎回来",3)}))},Update:function(e){p.a.post(d["ADDRESS"]+"/UpdateInfector/UpdateInfector",{},{params:{date:e}}).then((function(e){})).catch((function(e){}))},showDrawer:function(){this.drawerVisible=!0},closeDrawer:function(){this.drawerVisible=!1},submitForm:function(){},onValidateClick2:function(){this.ValidateKey=this.getRandomString(),this.ImageUrl2=d["ADDRESS"]+"/Login/GetValidateCodeImages?t=".concat(this.ValidateKey)}})},g=m,h=(a("b6ab"),a("0c7c")),f=Object(h["a"])(g,r,i,!1,null,"11b3785e",null),w=f.exports;t["default"]=w},b6ab:function(e,t,a){"use strict";var r=a("c5a8"),i=a.n(r);i.a},c5a8:function(e,t,a){}}]);